{"version":3,"file":"postgres.datasource.js","sourceRoot":"src/","sources":["datasources/postgres.datasource.ts"],"names":[],"mappings":";;;AAAA,iCAA0C;AAC1C,qCAAmC;AACnC,yCAAoC;AAEvB,QAAA,oBAAoB,GAAG,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AACxD,QAAA,kBAAkB,GAAG,IAAI,oBAAU,CAAC;IAC/C,IAAI,EAAE,UAAU;IAChB,QAAQ,EAAE,EAAE;IACZ,IAAI,EAAE,WAAW;IACjB,IAAI,EAAE,IAAI;IACV,QAAQ,EAAE,UAAU;IACpB,QAAQ,EAAE,MAAM;IAChB,QAAQ,EAAE,UAAU;CACrB,CAAC,CAAC;AAEH,IAAA,qBAAgB,EAAa;IAC3B,OAAO,EAAE,4BAAoB;IAC7B,IAAI,EAAE,oBAAoB;IAC1B,IAAI,EAAE,CAAC,eAAM,CAAC;IACd,KAAK,CAAC,eAAe,CAAC,MAAc;QAClC,MAAM,0BAAkB,CAAC,UAAU,EAAE,CAAC;QAEtC,MAAM,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;QAE5D,OAAO,0BAAkB,CAAC;IAC5B,CAAC;IACD,KAAK,EAAE;QACL,UAAU,CAAC,UAAU;YACnB,OAAO,UAAU,CAAC,aAAa,IAAI,UAAU,CAAC,KAAK,EAAE,CAAC;QACxD,CAAC;KACF;CACF,CAAC,CAAC","sourcesContent":["import {registerProvider} from \"@tsed/di\";\nimport {DataSource} from \"typeorm\";\nimport {Logger} from \"@tsed/logger\";\n\nexport const POSTGRES_DATA_SOURCE = Symbol.for(\"PostgresDataSource\");\nexport const PostgresDataSource = new DataSource({\n  type: \"postgres\",\n  entities: [],\n  host: \"localhost\",\n  port: 5432,\n  username: \"postgres\",\n  password: \"root\",\n  database: \"postgres\"\n});\n\nregisterProvider<DataSource>({\n  provide: POSTGRES_DATA_SOURCE,\n  type: \"typeorm:datasource\",\n  deps: [Logger],\n  async useAsyncFactory(logger: Logger) {\n    await PostgresDataSource.initialize();\n\n    logger.info(\"Connected with typeorm to database: Postgres\");\n\n    return PostgresDataSource;\n  },\n  hooks: {\n    $onDestroy(dataSource) {\n      return dataSource.isInitialized && dataSource.close();\n    }\n  }\n});\n"]}